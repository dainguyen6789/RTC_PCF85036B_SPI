<<<<<<< HEAD
C51 COMPILER V9.52.0.0   LCD_DRIVER_SPLC780D                                               08/06/2018 14:58:10 PAGE 1   
=======
C51 COMPILER V9.52.0.0   LCD_DRIVER_SPLC780D                                               08/07/2018 15:51:12 PAGE 1   
>>>>>>> 7a5f3df6684a2c9f1d307030c61e4f15880c2ed6


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE LCD_DRIVER_SPLC780D
OBJECT MODULE PLACED IN .\Obj\LCd_Driver_SPLC780D.obj
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE Application\Source\LCd_Driver_SPLC780D.c LARGE BROWSE INCDIR(.\Application\
                    -Header) DEBUG OBJECTEXTEND PRINT(.\Lis\LCd_Driver_SPLC780D.lst) TABS(2) OBJECT(.\Obj\LCd_Driver_SPLC780D.obj)

line level    source

   1          #include "LCD_Driver_SPLC780D.h"
   2          #include "stc15f2k60s2.h"
   3          
   4          
   5          void Wait_ms(int ms);
   6          void Command(unsigned char dat);
   7          void WriteData(unsigned char dat);
   8          
   9          void LCD_Init(void)
  10          {
  11   1      
  12   1        Wait_ms(150);
  13   1        Command(0x03);
  14   1        
  15   1        Wait_ms(30);
  16   1        Command(0x03);
  17   1        
  18   1        Wait_ms(10);
  19   1        Command(0x03);
  20   1        
  21   1        Wait_ms(10);
  22   1        Command(0x02);
  23   1        //Command(0x08);  
  24   1        Wait_ms(1);
  25   1        
  26   1        //Wait_ms(50);
  27   1        Command(0x02);  
  28   1        Command(0x08);
  29   1        
  30   1        Command(0x00);
  31   1        Command(0x0E);
  32   1        
  33   1        Command(0x00);  
  34   1        Command(0x06);
  35   1        Wait_ms(20);
  36   1        
  37   1      }
  38          void WriteData(unsigned char dat)
  39          { 
  40   1      
  41   1        /*LCD_E=1;
  42   1        Wait_ms(10);
  43   1        LCD_E=0;*/
  44   1        LCD_RS=1;
  45   1        LCD_RW=0;
  46   1        // 4 high bits
  47   1        LCD_D7=(dat&(1<<7)) >>7;
  48   1        LCD_D6=(dat&(1<<6)) >>6;
  49   1        LCD_D5=(dat&(1<<5)) >>5;
  50   1        LCD_D4=(dat&(1<<4)) >>4;
  51   1        LCD_E=1;
  52   1        Wait_ms(1);
  53   1        LCD_E=0;
  54   1        // 4 low bits
<<<<<<< HEAD
C51 COMPILER V9.52.0.0   LCD_DRIVER_SPLC780D                                               08/06/2018 14:58:10 PAGE 2   
=======
C51 COMPILER V9.52.0.0   LCD_DRIVER_SPLC780D                                               08/07/2018 15:51:12 PAGE 2   
>>>>>>> 7a5f3df6684a2c9f1d307030c61e4f15880c2ed6

  55   1        LCD_D7=(dat&(1<<3)) >>3;
  56   1        LCD_D6=(dat&(1<<2)) >>2;
  57   1        LCD_D5=(dat&(1<<1)) >>1;
  58   1        LCD_D4=dat&1; 
  59   1        //LCD_RS=0;
  60   1        LCD_E=1;
  61   1        Wait_ms(10);
  62   1        LCD_E=0;  
  63   1        LCD_RS=0;
  64   1          
  65   1      }
  66          
  67          void Command(unsigned char dat)//dat=0x0X
  68          { 
  69   1        LCD_RS=0;
  70   1        LCD_RW=0;
  71   1        //we only consider 4 low bits
  72   1        if((dat&(1<<3)) >>3)
  73   1          LCD_D7=1;
  74   1        else
  75   1          LCD_D7=0;
  76   1        if((dat&(1<<2)) >>2)
  77   1          LCD_D6=1;
  78   1        else
  79   1          LCD_D6=0; 
  80   1        if((dat&(1<<1)) >>1)
  81   1          LCD_D5=1;
  82   1        else
  83   1          LCD_D5=0; 
  84   1        if(dat&0x01)
  85   1          LCD_D4=1;
  86   1        else
  87   1          LCD_D4=0; 
  88   1        LCD_E=1;
  89   1        Wait_ms(10);
  90   1        LCD_E=0;  
  91   1      }
  92          
  93          void Wait_ms(int ms)
  94          {
  95   1        unsigned int De_Cnt;
  96   1        while( (ms--) != 0)
  97   1        {
  98   2          for(De_Cnt = 0; De_Cnt < 600; De_Cnt++); 
  99   2        }   
 100   1      }
 101           void DisplayLCD(unsigned char BCD)
 102          {
 103   1        unsigned char first_digit, second_digit;
 104   1        first_digit=BCD>>4 | 0x30;
 105   1        second_digit=BCD&0x0F | 0x30;
 106   1        //write 1st letter 
 107   1        WriteData(first_digit);
 108   1        // write second letter
 109   1        WriteData(second_digit);
 110   1      
 111   1      }
 112          
 113          void LCD_return_home(void)
 114          {
 115   1        Command(0x00);
 116   1        Command(0x02);
<<<<<<< HEAD
C51 COMPILER V9.52.0.0   LCD_DRIVER_SPLC780D                                               08/06/2018 14:58:10 PAGE 3   
=======
C51 COMPILER V9.52.0.0   LCD_DRIVER_SPLC780D                                               08/07/2018 15:51:12 PAGE 3   
>>>>>>> 7a5f3df6684a2c9f1d307030c61e4f15880c2ed6

 117   1        
 118   1      }
 119          void LCD_clear(void)
 120          {
 121   1        Command(0x00);
 122   1        Command(0x01);
 123   1        
 124   1      }
 125          
 126          void Display_Line(int line)
 127          {
 128   1        if (line==1)
 129   1        { 
 130   2          Command(0x08);
 131   2          Command(0x00);
 132   2        }
 133   1        else
 134   1        {
 135   2          Command(0x0C);
 136   2          Command(0x00);
 137   2        }
 138   1      }
 139          
 140          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    371    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----       2
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
